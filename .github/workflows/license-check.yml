name: License open-source check
on: [push]
jobs:
  check-licenses:
    name: Confirm if all licenses are open-source
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v1
      - run: yarn add js-green-licenses
      - run: yarn jsgl --local ./ > license-output.txt
        name: Save license output to file
      - run: cat license-output.txt
        name: Print license output to console
      - name: "Success scenario"
        run: |
          # Workflow failes because grep exits with 1
          echo "All green!" | grep -q "All green!" "license-output.txt"
